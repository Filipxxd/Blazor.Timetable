@page "/"
@using System.Collections.ObjectModel
@using Timetable.Components
@using Timetable.Common.Enums
@using Timetable.Components.Shared.Forms
@rendermode InteractiveServer

<PageTitle>Example page</PageTitle>

<Timetable @bind-Events=Events 
           TEvent=TimetableEvent
           Title="e => e.Title"
           DateFrom="e => e.StartTime"
           DateTo="e => e.EndTime"
           GroupId="e => e.GroupId"

           TimetableConfig="new(){
                DefaultDisplayType=DisplayType.Week,
                DisplayTypes=[DisplayType.Week, DisplayType.Month, DisplayType.Day],
                Days=[ DayOfWeek.Sunday, DayOfWeek.Monday, DayOfWeek.Tuesday, DayOfWeek.Wednesday, DayOfWeek.Thursday, DayOfWeek.Friday],
                TimeFrom=new(8, 0),
                TimeTo=new(22, 0),
                Is24HourFormat=true
            }"

            OnEventChanged=HandleEventChanged
            OnPreviousClicked=HandlePreviousClicked 
            OnNextClicked=HandleNextClicked>
    <AdditionalFields>
        <Input Model=@context Label="Description" Selector="x => x.Description" />
    </AdditionalFields>
</Timetable>

@code{
    public IList<TimetableEvent> Events { get; set; } = new EventGenerator().GenerateHardcodedEvents();

    public void HandleNextClicked()
    {
        // TODO: Custom behaviour
    }

    public void HandlePreviousClicked()
    {
        // TODO: Custom behaviour
    }
    
    public void HandleEventChanged(TimetableEvent timetableEvent){
        // TODO: Update the event in the database
    }
}